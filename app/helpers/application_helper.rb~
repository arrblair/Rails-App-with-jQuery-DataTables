module ApplicationHelper

def ae_some_html(s)
  # converting newlines
  s.gsub!(/\r\n?/, "\n")

  #escaping HTML to entities
  s = s.to_s.gsub('&', '&amp;').gsub('<', '&lt;').gsub('>', '&gt;')

  #replacing newlines to <br> ans <p> tags
  # wrapping text into paragraph
  s = "<p>" + s.gsub(/\n\n+/, "</p>\n\n<p>").
    gsub(/([^\n]\n)(?=[^\n])/, '\1<br />') + "</p>"

  s
end
  


end
